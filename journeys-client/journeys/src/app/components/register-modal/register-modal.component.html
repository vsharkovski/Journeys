<div class="modal-header">
  <h5 class="modal-title" id="loginModalLabel">Sign up</h5>
  <button
    type="button"
    class="btn-close"
    (click)="activeModal.close()"
  ></button>
</div>
<div class="modal-body">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" #f="ngForm">
    <div class="mb-3">
      <label for="registerEmail" class="form-label">Email address</label>
      <input
        formControlName="email"
        [class.is-invalid]="
          emailField && emailField.touched && emailField.invalid
        "
        type="email"
        class="form-control"
        id="registerEmail"
      />
      <div
        *ngIf="emailField && emailField.touched && emailField.invalid"
        class="d-block invalid-feedback"
      >
        Please provide a valid email address.
      </div>
    </div>
    <div class="mb-3">
      <label for="registerUsername" class="form-label">Username</label>
      <input
        formControlName="username"
        [class.is-invalid]="
          usernameField && usernameField.touched && usernameField.invalid
        "
        class="form-control"
        id="registerUsername"
      />
      <div
        *ngIf="usernameField && usernameField.touched && usernameField.invalid"
        class="d-block invalid-feedback"
      >
        Your username should have between 3 and 20 characters.
      </div>
    </div>
    <div class="mb-3">
      <label for="registerPassword" class="form-label">Password</label>
      <input
        formControlName="password"
        [class.is-invalid]="
          passwordField && passwordField.touched && passwordField.invalid
        "
        type="password"
        class="form-control"
        id="registerPassword"
      />
      <div
        *ngIf="passwordField && passwordField.touched && passwordField.invalid"
        class="d-block invalid-feedback"
      >
        Your password should have between 6 and 40 characters.
      </div>

      <div class="mt-3">
        <label for="picture" class="form-label">Profile picture</label>
        <input type="file" class="form-control" id="picture" name="profilePicture" accept="image/png, image/jpeg"
               formControlName="profilePicture" (change)="onFileChange($event)" />
      </div>
    </div>
    <button
      [disabled]="form.invalid"
      type="submit"
      class="mt-3 btn btn-dark w-100"
    >
      Submit
    </button>
    <div
      class="alert alert-warning mt-3"
      *ngIf="f.submitted && lastMessage && !lastMessage.success"
    >
      Sign up failed!<br/>{{ lastMessage.message }}
    </div>
  </form>
  <div class="alert alert-success mt-3" *ngIf="lastMessage?.success">
    You have successfully signed up!<br/>You can
    <a class="text-decoration-underline" (click)="openLoginModal()">log in</a>
    now.
  </div>
</div>
